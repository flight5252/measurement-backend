language: java
jdk:
- openjdk8
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::7}
  - secure: DhV0tEN3yPN8dOSUbhvH9rdlYar/ZwUPSmRuSAoxFqiB6gKd9uZJrX7ZztkeGGe9W5WtKlD3n2iF70PQqVwbKPiv16jBTy7pbab3gnDPzVd5xwxjdT/cKdCfHfIe+8h2bAbb4gj3Cfk2bsXQx7ZIgzow+RWjJKJXua4QemZ6j5mxeLNk5Gk6WcR9bKN4TWbPVCGHPssGop5G2nk3bgdC3kYE06CsOIqwSoTr+rUyCUekgvpZ43ZnfxcpJ6+tapV2HjCY6N52SC8rjyq588JlyzmhTwsmsfH4H1D6SrBbUA/i3F8EeTb8iwBzCBHZiF800fw52Z05tMr8AwAocAGYskdVAwiAP/Gm3oyPOYbhwEDfR+GEucJCxTJNbwN/Ob94f7q55/YMe/UZYQuPXBOPWzGKEm6LD3BBEaG6lIo34pXHbAWVPW5LaiczahIRzyhl/+JYT5kuouNjZ0SE7tnPN78mEuqkERQ2eUBmXsSb0qxxAJRqmfqGZChB4g3Jo6U+6HdtxmycGGh4ESoDI/4WCUtQZc/iLla9pFp3X3s6xvhZUyc8dFJXkcWO2+4Q1Z74eBZSYUTo8XNA9UnncfL2FaLTjnmTRYk1kiFy0Fe4JYvjpHNrLh5zFhVs9tWW9E/eMyzqmve1DPA5qgXAfe1VsjQxjR7STeo/siGPPoy3sqI=
  - secure: RQ3kg1z1fhSqaub6gTpY7eCoDRvzacvaB5L6KQn0TltnnJvVt+uKG9bhVlNVfUYOgZvOCIB+SeGxcln6jKzOyyLJDwWQcPNWFtEC4MRHpvwoado3cyiIOkzRCxgBneM0yz5Nvup6e/54DyLNS9wFdDvSFS/pCaSGn7C0z53uGdK7yHJZh8WYGnSy0mBWK1GcxrNuNhphluvfQBjNqUJB80JxnY9OV9ezk0VKmC9wkIFfe0GjRhbyw7S4otcQoWpQ22P9GtNMkGWusNNkz0XW99NjDw4KsJLSEIbtXqQIFOCAjQH79qyZsLKs8ujTmxJUywVXHeImemCHlVVhUoKqA7mvWqEc0gR4iPH8NNLs8t2nFa70yZnY9c5nRJIxvW3n+wvvJNteC4E6pnYCT5zajVfRZ0RMxAzRpa+b8XEoVKk3p641PBZXx+k2m1I0+K9ZQJWk2t4BBVRfaRbhbBDDin8Dq6U9DeveoTu57APGfa/2h+qDjGOok1+SNlDwWJTh0bdRyF404VxqcgN8kPD6bEmxe/FEaPR+okLZSO/l2ggQyHKZT9vtgWTcGVVeiOY5ziU2cPkqa6vaAUrc0a/q33gIVmm0zOfk31O2r+XEptoegqpLKwaHz4hyPsAfSoiYgQMQKoJpSTxlGfvsI/nhn0TcaFsiBkHjjiWa6jLjHBI=
  - secure: HLHoRhEOy4poS7Leg49hxye+CFtCwJajjVFhaNruf4yjH+AbMdWYLj6+7jnEWgBVskgFUQLD75TOIlYcdH6dXpf9ugM+o0JaWcTuSWpm4ZVle445qhSWkjL+xjPu91mfHMp5BiUoWH+5ceBQObG263KG1uKws3IB1yWToT8l/PFt3WPwvGeKv0cFLIZnVer83CB3WyR5nC8lvaevbfN4Lh7d86LLUgxlJ7P5y18E3JOeLgfoM/rNpq4izyTa5W84LEXGO1esP9PlxlMXwcabmSvyXuyPWlV/+BrbD+pNCpgAm8yT11xuEfqvHIMW+Hfyyne3JNMfLbMoVvHqMmnLFJsyw2y1ypC4B/eD+xKwBMbiSE2IWfahyEMPVCxr0BL9kqwtT6wudAJlDUipTQeJEfyX4dloTQxvJE+g5hezuVXbr2bgaft5sACuAcLhxZdCP/e7wl95cSGN/8jNxZj071QBUdc73mXqigxwH5ZJUbHXqSt09YLI/zb2oS1pL2qxrKAdLwPlm7PMlmpgGnq/j9YNsIkxpC0DGUmbELIf95eWme2M930N91mi79e9s/L6iR5YKgPq383cnBUaioVVgD16g+5e18/1t27+FkQtNL4Ou9joHOIkoFkfIAApl+j/lxQFQ1plHaURuGA09GJqtntTc+TgPN36x1gIxNzYh30=
  - secure: fFzVPJ8Im/YKv1IQkrX0tVKXRqceaZMGs1i+7DtoyKlvZ3OAUEDFdB1sK3BzO7rhYjRVJNpz2oPWzvK/eXLAjchEx25lr62Ii27da4r2hay7uzd0EO/1Cg5BW07VWGcgM3V9xx1ZOiFBkpp58j14zKeuWs+pwPqEGHV0un6brExSGV+RaX4JDi+U2RMRCC9wmH5YXzifuzitSJ/GFr3WlkBCBRyR+Dm0vGift6Ef7ifJfsGN6pXXvxCm85a76ZHFMY2ojFb0T1TLnsm9LjRXUN4AT5InR0+SeKHDsAM6DG3NEtM7lxjinH9bQsv7oQy3a7BmFzkWLx0Dd7lNP+SsE5jfA0l8y/0EsAx/8awYJpS5L7EaUHIVMvj2WbMmY/CL8DFWCed3NRB71H06hhzU0XfLe2ObazB/tWfRY8B81Q+rYyuPTY1GJ9HwmShZDWF9b1/P0/4I5vsMJH8UylqOd382rPx5oncD/5SE0hs28h7Vo+fCCX34yCAiHRZR8lXWvqDQrKqKt16zHMkDBlRWw46QMaYf7/jAuXX81KWafrF2yR58BvqQuLeX+RVZG6rWEqBt6W9OdNoHogDvXHVSg/plQPE/pWZVynYVcV8dbrkclMpKXeI/uI4l7dDlpq2t84x6n0DMdSaTWAWmgkVsz6Ln8crEOr6wB7T2Axz0gHo=
after_success:
- docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- export IMAGE_NAME=flight5252/measurement
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
deploy:
  skip_cleanup: true
  provider: heroku
  app: "$HEROKU_APP_NAME"
  on:
    branch: master
